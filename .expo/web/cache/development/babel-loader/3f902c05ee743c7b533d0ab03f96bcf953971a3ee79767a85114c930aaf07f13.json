{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport axios from \"axios\";\nimport { useState } from \"react\";\nexport var RestAPI = function RestAPI() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    client_user = _useState6[0],\n    setClientUser = _useState6[1];\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    reseller_user = _useState8[0],\n    setResellerUser = _useState8[1];\n  var _useState9 = useState(),\n    _useState10 = _slicedToArray(_useState9, 2),\n    collector_user = _useState10[0],\n    setCollectorUser = _useState10[1];\n  var _useState11 = useState(),\n    _useState12 = _slicedToArray(_useState11, 2),\n    data = _useState12[0],\n    setData = _useState12[1];\n  function sendRequest(config) {\n    setLoading(true);\n    axios(config).then(function (response) {\n      setError('');\n      console.log(response);\n      setClientUser(response.data);\n      setResellerUser(response.data);\n      setCollectorUser(response.data);\n    }).catch(function (error) {\n      setError(error.message);\n    }).finally(function () {\n      return setLoading(false);\n    });\n  }\n  function assignCollector(idata) {\n    setLoading(true);\n    var body = JSON.stringify(idata);\n    var config = {\n      headers: {\n        'Content-Type': 'application/json',\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    };\n    axios.post(\"http://10.10.7.131:8080/sendCollectors\", body, config).then(function (response) {\n      setData(response.data);\n      console.log(response.data);\n      console.log(\"Connection success\");\n    }).catch(function (error) {\n      setError(error.response.data.message);\n      console.log(error.response.data.message);\n    }).finally(function () {\n      setLoading(false);\n    });\n  }\n  return [sendRequest, assignCollector, loading, error, client_user, reseller_user, collector_user];\n};","map":{"version":3,"names":["axios","useState","RestAPI","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","error","setError","_useState5","_useState6","client_user","setClientUser","_useState7","_useState8","reseller_user","setResellerUser","_useState9","_useState10","collector_user","setCollectorUser","_useState11","_useState12","data","setData","sendRequest","config","then","response","console","log","catch","message","finally","assignCollector","idata","body","JSON","stringify","headers","post"],"sources":["D:/FOURTH YEAR SUBs/Research/collectify-front-end/src/Services/RestAPI.tsx"],"sourcesContent":["import axios, { AxiosRequestConfig } from \"axios\";\r\nimport { useState } from \"react\";\r\n\r\n\r\n/*\r\nexport interface IUser {\r\n    userId: number, \r\n    username: string, \r\n    password: string,\r\n    email:string, \r\n\r\n}\r\n\r\nexport interface IDuePayments{\r\n    itemName: string; \r\n    requiredCollectible: number; \r\n    dueStatus: Boolean\r\n}\r\n*/\r\n\r\nexport interface IClient{\r\n    client_id: number, \r\n    username: String, \r\n    password: String, \r\n    fullName: String, \r\n    address: String, \r\n    email: String, \r\n    contracts: Contract[];\r\n}\r\nexport interface Contract{\r\n    contract_id: number,\r\n    username: String, \r\n    itemName: String, \r\n    dueAmount: number, \r\n    fullPrice: number, \r\n    isPaid: Boolean,\r\n}\r\n\r\nexport interface ICollector{\r\n    collector_id: number, \r\n    username: String, \r\n    password: String, \r\n    fullName: String, \r\n    address: String, \r\n    email: String, \r\n}\r\n\r\nexport interface IReseller{\r\n    reseller_id: number, \r\n    username: String, \r\n    password: String, \r\n    fullName: String, \r\n    address: String, \r\n    email: String, \r\n}\r\n\r\nexport interface IData{\r\n    paymentDues: number, \r\n    reseller: {reseller_id: number} ,\r\n    collector: {collector_id: number} ,\r\n    client: {client_id: number}; \r\n\r\n}\r\n\r\nexport const RestAPI = (): [(config: AxiosRequestConfig<any>) => void, (idata:IData) => void, boolean, string, IClient | any, IReseller | any, ICollector | any] => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const [client_user, setClientUser] = useState<IClient[]>([]); \r\n    const [reseller_user, setResellerUser] = useState<IReseller[]>(); \r\n    const [collector_user, setCollectorUser] = useState<ICollector[]>(); \r\n    const [data, setData] = useState<IData[]>();\r\n\r\n    function sendRequest(config: AxiosRequestConfig<any>) {\r\n        setLoading(true);\r\n\r\n         axios(config)\r\n            .then((response) => {\r\n                setError('');\r\n                console.log(response);\r\n                setClientUser(response.data); //YOU NEED TO ADD THIS TO PUT ALL RESPONSES TO THE USESTATE\r\n                setResellerUser(response.data);\r\n                setCollectorUser(response.data);\r\n            })\r\n            .catch((error) => {\r\n                setError(error.message);\r\n            })\r\n            .finally(() => setLoading(false))\r\n    }\r\n\r\n        //POST - USER\r\n        function assignCollector(idata: IData) {\r\n            setLoading(true);\r\n            const body = JSON.stringify(idata);\r\n            const config = {\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                \"Access-Control-Allow-Origin\": \"*\",\r\n              },\r\n            };\r\n          \r\n            axios\r\n              .post(\"http://10.10.7.131:8080/sendCollectors\", body, config)\r\n              .then((response) => {\r\n                setData(response.data);\r\n                console.log(response.data)\r\n                console.log(\"Connection success\")\r\n              })\r\n              .catch((error) => {\r\n                setError(error.response.data.message);\r\n                console.log(error.response.data.message);\r\n              })\r\n              .finally(() => {\r\n                setLoading(false);\r\n              });\r\n          }\r\n          \r\n\r\n    \r\n\r\n\r\n\r\n    return [sendRequest, assignCollector,loading, error, client_user, reseller_user, collector_user];\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}