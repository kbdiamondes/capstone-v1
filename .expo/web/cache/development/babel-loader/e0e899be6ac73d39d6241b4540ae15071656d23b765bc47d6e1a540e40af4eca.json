{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useState } from 'react';\nimport { Camera } from 'expo-camera';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function CameraShot() {\n  var nameProp = useRoute().params.nameprop;\n  var priceProp = useRoute().params.priceprop;\n  var contractIdProp = useRoute().params.contractId;\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    startCamera = _React$useState2[0],\n    setStartCamera = _React$useState2[1];\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    previewVisible = _useState2[0],\n    setPreviewVisible = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    capturedImage = _useState4[0],\n    setCapturedImage = _useState4[1];\n  var navigation = useNavigation();\n  var __startCamera = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestCameraPermissionsAsync(),\n        status = _yield$Camera$request.status;\n      if (status === 'granted') {\n        setStartCamera(true);\n      } else {\n        Alert.alert('Access denied');\n      }\n    });\n    return function __startCamera() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var _React$useState3 = React.useState(),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    imageLink = _React$useState4[0],\n    setImageLink = _React$useState4[1];\n  var setImage = function setImage(photo) {\n    setImageLink(photo);\n  };\n  var __takePicture = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (!camera) return;\n      var photo = yield camera.takePictureAsync();\n      var response = yield fetch(photo.uri);\n      var data = yield response.blob();\n      var reader = new FileReader();\n      reader.onloadend = function () {\n        if (reader.result !== null && typeof reader.result === 'string') {\n          var base64Image = reader.result.split(',')[1];\n          console.log(photo);\n          navigation.navigate('ImageScreenPreview', {\n            imageprop: base64Image,\n            nameprop: nameProp,\n            priceprop: priceProp,\n            contractId: contractIdProp\n          });\n        }\n      };\n      console.log(priceProp);\n      reader.readAsDataURL(data);\n    });\n    return function __takePicture() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var camera;\n  return _jsx(SafeAreaView, {\n    style: {\n      flex: 1,\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    children: _jsx(Camera, {\n      style: {\n        flex: 1,\n        width: \"100%\"\n      },\n      ref: function ref(r) {\n        camera = r;\n      },\n      children: _jsx(View, {\n        style: {\n          flex: 1,\n          width: '100%',\n          backgroundColor: 'transparent',\n          flexDirection: 'row'\n        },\n        children: _jsx(View, {\n          style: {\n            position: 'absolute',\n            bottom: 0,\n            flexDirection: 'row',\n            flex: 1,\n            width: '100%',\n            padding: 20,\n            justifyContent: 'space-between'\n          },\n          children: _jsx(View, {\n            style: {\n              alignSelf: 'center',\n              flex: 1,\n              alignItems: 'center'\n            },\n            children: _jsx(TouchableOpacity, {\n              onPress: __takePicture,\n              style: {\n                width: 70,\n                height: 70,\n                bottom: 0,\n                borderRadius: 50,\n                backgroundColor: '#fff'\n              }\n            })\n          })\n        })\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    paddingTop: 31,\n    paddingHorizontal: 21\n  },\n  textHeader: {\n    fontSize: 15,\n    fontWeight: 'bold',\n    color: '#9F9F9F',\n    paddingHorizontal: 23,\n    marginBottom: 10\n  }\n});","map":{"version":3,"names":["React","useState","Camera","useNavigation","useRoute","jsx","_jsx","CameraShot","nameProp","params","nameprop","priceProp","priceprop","contractIdProp","contractId","_React$useState","_React$useState2","_slicedToArray","startCamera","setStartCamera","_useState","_useState2","previewVisible","setPreviewVisible","_useState3","_useState4","capturedImage","setCapturedImage","navigation","__startCamera","_ref","_asyncToGenerator","_yield$Camera$request","requestCameraPermissionsAsync","status","Alert","alert","apply","arguments","_React$useState3","_React$useState4","imageLink","setImageLink","setImage","photo","__takePicture","_ref2","camera","takePictureAsync","response","fetch","uri","data","blob","reader","FileReader","onloadend","result","base64Image","split","console","log","navigate","imageprop","readAsDataURL","SafeAreaView","style","flex","justifyContent","alignItems","children","width","ref","r","View","backgroundColor","flexDirection","position","bottom","padding","alignSelf","TouchableOpacity","onPress","height","borderRadius","styles","StyleSheet","create","container","paddingTop","paddingHorizontal","textHeader","fontSize","fontWeight","color","marginBottom"],"sources":["D:/FOURTH YEAR SUBs/Research/collectify-front-end/src/Components/Client/Camera.tsx"],"sourcesContent":["import {SafeAreaView, View, Text, StyleSheet, ScrollView, TouchableOpacity, Alert} from 'react-native';\r\nimport React, { useState } from 'react';\r\nimport {Camera} from 'expo-camera'\r\nimport CameraPreview from './CameraPreview';\r\nimport { CheckScreenNavigationprop, RootStackParamList } from \"../../../App\";\r\nimport { RouteProp, useNavigation, useRoute } from '@react-navigation/native';\r\n\r\nexport default function CameraShot(){\r\n  const nameProp = useRoute<RouteProp<RootStackParamList, 'CameraShot'>>().params.nameprop;\r\n  const priceProp = useRoute<RouteProp<RootStackParamList, 'CameraShot'>>().params.priceprop;\r\n  const contractIdProp = useRoute<RouteProp<RootStackParamList, 'CameraShot'>>().params.contractId;\r\n    const [startCamera,setStartCamera] = React.useState(false)\r\n    const [previewVisible, setPreviewVisible] = useState(false)\r\n    const [capturedImage, setCapturedImage] = useState<any>(null)\r\n    const navigation = useNavigation <CheckScreenNavigationprop>();\r\n    const __startCamera = async () => {\r\n        const {status} = await Camera.requestCameraPermissionsAsync()\r\n        if (status === 'granted') {\r\n          // start the camera\r\n          setStartCamera(true)\r\n        } else {\r\n          Alert.alert('Access denied')\r\n        }\r\n      }\r\n\r\n\r\n      const [imageLink, setImageLink] = React.useState()\r\n      const setImage = (photo:any)=> {\r\n        setImageLink(photo)\r\n      }\r\n       \r\n\r\n        const __takePicture = async () => {\r\n          if (!camera) return;\r\n\r\n          const photo = await camera.takePictureAsync();\r\n\r\n          // Fetch the image and convert it to a Blob\r\n          const response = await fetch(photo.uri);\r\n          const data = await response.blob();\r\n\r\n          // Convert the Blob to a base64 string\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => {\r\n            if (reader.result !== null && typeof reader.result === 'string') {\r\n              const base64Image = reader.result.split(',')[1]; // Remove the 'data:image/png;base64,' part\r\n              // Now you have the base64Image without the data URL prefix\r\n\r\n              console.log(photo);\r\n              navigation.navigate('ImageScreenPreview', {\r\n                imageprop: base64Image,\r\n                nameprop: nameProp,\r\n                priceprop: priceProp,\r\n                contractId: contractIdProp\r\n                \r\n              });\r\n            }\r\n          };\r\n\r\n          console.log(priceProp); \r\n          reader.readAsDataURL(data);\r\n        };\r\n        \r\n    let camera: Camera\r\n    return(\r\n      <SafeAreaView style={{flex:1, justifyContent:\"center\", alignItems:\"center\"}}>\r\n            <Camera\r\n              style={{flex: 1, width: \"100%\"}}\r\n              ref={(r) => {\r\n                camera = r\r\n              }}\r\n            >\r\n              <View\r\n                style={{\r\n                  flex: 1,\r\n                  width: '100%',\r\n                  backgroundColor: 'transparent',\r\n                  flexDirection: 'row'\r\n                }}\r\n              >\r\n                <View\r\n                  style={{\r\n                    position: 'absolute',\r\n                    bottom: 0,\r\n                    flexDirection: 'row',\r\n                    flex: 1,\r\n                    width: '100%',\r\n                    padding: 20,\r\n                    justifyContent: 'space-between'\r\n                  }}\r\n                  >\r\n                  <View\r\n                    style={{\r\n                      alignSelf: 'center',\r\n                      flex: 1,\r\n                      alignItems: 'center'\r\n                    }}\r\n                  >\r\n                    <TouchableOpacity\r\n                      onPress={__takePicture}\r\n                      style={{\r\n                        width: 70,\r\n                        height: 70,\r\n                        bottom: 0,\r\n                        borderRadius: 50,\r\n                        backgroundColor: '#fff'\r\n                      }}\r\n                    />\r\n                  </View>\r\n                </View>\r\n              </View>\r\n            </Camera>\r\n      \r\n      </SafeAreaView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n        paddingTop: 31, \r\n        paddingHorizontal: 21\r\n    }, \r\n    textHeader:{\r\n        fontSize: 15,\r\n        fontWeight: 'bold', \r\n        color: '#9F9F9F',\r\n        paddingHorizontal: 23,\r\n        marginBottom: 10\r\n    }\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}