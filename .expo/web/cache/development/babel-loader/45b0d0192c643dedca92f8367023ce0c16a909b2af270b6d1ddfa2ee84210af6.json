{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useState } from 'react';\nimport { Camera } from 'expo-camera';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function CameraShot() {\n  var nameProp = useRoute().params.nameprop;\n  var priceProp = useRoute().params.priceprop;\n  var contractIdProp = useRoute().params.contractId;\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    startCamera = _React$useState2[0],\n    setStartCamera = _React$useState2[1];\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    previewVisible = _useState2[0],\n    setPreviewVisible = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    capturedImage = _useState4[0],\n    setCapturedImage = _useState4[1];\n  var navigation = useNavigation();\n  var __startCamera = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestCameraPermissionsAsync(),\n        status = _yield$Camera$request.status;\n      if (status === 'granted') {\n        setStartCamera(true);\n      } else {\n        Alert.alert('Access denied');\n      }\n    });\n    return function __startCamera() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var _React$useState3 = React.useState(),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    imageLink = _React$useState4[0],\n    setImageLink = _React$useState4[1];\n  var setImage = function setImage(photo) {\n    setImageLink(photo);\n  };\n  var __takePicture = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (!camera) return;\n      var photo = yield camera.takePictureAsync();\n      var blob = yield fetch(photo.uri).then(function (response) {\n        return response.blob();\n      });\n      console.log(photo);\n      navigation.navigate('ImageScreenPreview', {\n        imageprop: photo,\n        nameprop: nameProp,\n        priceprop: priceProp,\n        contractId: contractIdProp\n      });\n    });\n    return function __takePicture() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var camera;\n  return _jsx(SafeAreaView, {\n    style: {\n      flex: 1,\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    children: startCamera ? _jsx(Camera, {\n      style: {\n        flex: 1,\n        width: \"100%\"\n      },\n      ref: function ref(r) {\n        camera = r;\n      },\n      children: _jsx(View, {\n        style: {\n          flex: 1,\n          width: '100%',\n          backgroundColor: 'transparent',\n          flexDirection: 'row'\n        },\n        children: _jsx(View, {\n          style: {\n            position: 'absolute',\n            bottom: 0,\n            flexDirection: 'row',\n            flex: 1,\n            width: '100%',\n            padding: 20,\n            justifyContent: 'space-between'\n          },\n          children: _jsx(View, {\n            style: {\n              alignSelf: 'center',\n              flex: 1,\n              alignItems: 'center'\n            },\n            children: _jsx(TouchableOpacity, {\n              onPress: __takePicture,\n              style: {\n                width: 70,\n                height: 70,\n                bottom: 0,\n                borderRadius: 50,\n                backgroundColor: '#fff'\n              }\n            })\n          })\n        })\n      })\n    }) : _jsx(View, {\n      style: {\n        flex: 1,\n        backgroundColor: '#fff',\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: _jsx(TouchableOpacity, {\n        onPress: __startCamera,\n        style: {\n          width: 130,\n          borderRadius: 4,\n          backgroundColor: '#14274e',\n          flexDirection: 'row',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: 40\n        },\n        children: _jsx(Text, {\n          style: {\n            color: '#fff',\n            fontWeight: 'bold',\n            textAlign: 'center'\n          },\n          children: \"Picture of Receipt\"\n        })\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    paddingTop: 31,\n    paddingHorizontal: 21\n  },\n  textHeader: {\n    fontSize: 15,\n    fontWeight: 'bold',\n    color: '#9F9F9F',\n    paddingHorizontal: 23,\n    marginBottom: 10\n  }\n});","map":{"version":3,"names":["React","useState","Camera","useNavigation","useRoute","jsx","_jsx","CameraShot","nameProp","params","nameprop","priceProp","priceprop","contractIdProp","contractId","_React$useState","_React$useState2","_slicedToArray","startCamera","setStartCamera","_useState","_useState2","previewVisible","setPreviewVisible","_useState3","_useState4","capturedImage","setCapturedImage","navigation","__startCamera","_ref","_asyncToGenerator","_yield$Camera$request","requestCameraPermissionsAsync","status","Alert","alert","apply","arguments","_React$useState3","_React$useState4","imageLink","setImageLink","setImage","photo","__takePicture","_ref2","camera","takePictureAsync","blob","fetch","uri","then","response","console","log","navigate","imageprop","SafeAreaView","style","flex","justifyContent","alignItems","children","width","ref","r","View","backgroundColor","flexDirection","position","bottom","padding","alignSelf","TouchableOpacity","onPress","height","borderRadius","Text","color","fontWeight","textAlign","styles","StyleSheet","create","container","paddingTop","paddingHorizontal","textHeader","fontSize","marginBottom"],"sources":["D:/FOURTH YEAR SUBs/Research/collectify-front-end/src/Components/Client/Camera.tsx"],"sourcesContent":["import {SafeAreaView, View, Text, StyleSheet, ScrollView, TouchableOpacity, Alert} from 'react-native';\r\nimport React, { useState } from 'react';\r\nimport {Camera} from 'expo-camera'\r\nimport CameraPreview from './CameraPreview';\r\nimport { CheckScreenNavigationprop, RootStackParamList } from \"../../../App\";\r\nimport { RouteProp, useNavigation, useRoute } from '@react-navigation/native';\r\n\r\nexport default function CameraShot(){\r\n  const nameProp = useRoute<RouteProp<RootStackParamList, 'CameraShot'>>().params.nameprop;\r\n  const priceProp = useRoute<RouteProp<RootStackParamList, 'CameraShot'>>().params.priceprop;\r\n  const contractIdProp = useRoute<RouteProp<RootStackParamList, 'CameraShot'>>().params.contractId;\r\n    const [startCamera,setStartCamera] = React.useState(false)\r\n    const [previewVisible, setPreviewVisible] = useState(false)\r\n    const [capturedImage, setCapturedImage] = useState<any>(null)\r\n    const navigation = useNavigation <CheckScreenNavigationprop>();\r\n    const __startCamera = async () => {\r\n        const {status} = await Camera.requestCameraPermissionsAsync()\r\n        if (status === 'granted') {\r\n          // start the camera\r\n          setStartCamera(true)\r\n        } else {\r\n          Alert.alert('Access denied')\r\n        }\r\n      }\r\n      const [imageLink, setImageLink] = React.useState()\r\n      const setImage = (photo:any)=> {\r\n        setImageLink(photo)\r\n      }\r\n\r\n      /*const __takePicture = async () => {\r\n        if (!camera) return;\r\n        \r\n        const photo = await camera.takePictureAsync();\r\n        \r\n        // Access the base64 image data\r\n        const photoBase64 = photo.base64;\r\n      \r\n        console.log(\"test \" + photoBase64); // This is the base64-encoded image data\r\n        \r\n        // Set the photoBase64 in your component's state or use it as needed\r\n        setPreviewVisible(true);\r\n        setCapturedImage(photoBase64)*/\r\n\r\n       \r\n\r\n        const __takePicture = async () => {\r\n          if (!camera) return;\r\n      \r\n          const photo = await camera.takePictureAsync();\r\n          \r\n          // Convert the photo to a Blob\r\n          const blob = await fetch(photo.uri).then(response => response.blob());\r\n      \r\n          // Now you have the photo as a Blob\r\n          console.log(photo);\r\n          \r\n         navigation.navigate('ImageScreenPreview', {imageprop:photo,nameprop:nameProp, priceprop:priceProp, contractId:contractIdProp});\r\n          \r\n        \r\n      \r\n    \r\n\r\n        //buhaton is convert STRING (PHOTO VARIABLE) -> IMAGE\r\n        //const [imageLink, setImageLink] \r\n        //setImageLink(photo)\r\n        //const base64 = setImageLink\r\n        //type binaryImageData = Base64.decode(base64)\r\n\r\n        /*\r\n        import { FileSystem } from 'expo';\r\n\r\n        const fileName = 'myImage.png'; // Set a desired file name\r\n\r\n        FileSystem.writeAsStringAsync(FileSystem.documentDirectory + fileName, binaryImageData, {\r\n          encoding: FileSystem.EncodingType.Base64,\r\n        })\r\n          .then(() => {\r\n            console.log(`Image saved as ${fileName}`);\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error saving image:', error);\r\n          });\r\n\r\n        */\r\n          //import sa ug \"const navigation = useNavigate<CheckScreenPropschu>\"\r\n          //navigation.push('')\r\n          //navigation.goBack()\r\n          //navigation.goBack()\r\n        \r\n\r\n      }\r\n      \r\n    let camera: Camera\r\n    return(\r\n      <SafeAreaView style={{flex:1, justifyContent:\"center\", alignItems:\"center\"}}>\r\n      {startCamera ? (\r\n       \r\n            <Camera\r\n              style={{flex: 1, width: \"100%\"}}\r\n              ref={(r) => {\r\n                camera = r\r\n              }}\r\n            >\r\n              <View\r\n                style={{\r\n                  flex: 1,\r\n                  width: '100%',\r\n                  backgroundColor: 'transparent',\r\n                  flexDirection: 'row'\r\n                }}\r\n              >\r\n                <View\r\n                  style={{\r\n                    position: 'absolute',\r\n                    bottom: 0,\r\n                    flexDirection: 'row',\r\n                    flex: 1,\r\n                    width: '100%',\r\n                    padding: 20,\r\n                    justifyContent: 'space-between'\r\n                  }}\r\n                  >\r\n                  <View\r\n                    style={{\r\n                      alignSelf: 'center',\r\n                      flex: 1,\r\n                      alignItems: 'center'\r\n                    }}\r\n                  >\r\n                    <TouchableOpacity\r\n                      onPress={__takePicture}\r\n                      style={{\r\n                        width: 70,\r\n                        height: 70,\r\n                        bottom: 0,\r\n                        borderRadius: 50,\r\n                        backgroundColor: '#fff'\r\n                      }}\r\n                    />\r\n                  </View>\r\n                </View>\r\n              </View>\r\n            </Camera>\r\n      ) : (\r\n        <View\r\n          style={{\r\n            flex: 1,\r\n            backgroundColor: '#fff',\r\n            justifyContent: 'center',\r\n            alignItems: 'center'\r\n          }}\r\n        >\r\n          <TouchableOpacity\r\n            onPress={__startCamera}\r\n            style={{\r\n              width: 130,\r\n              borderRadius: 4,\r\n              backgroundColor: '#14274e',\r\n              flexDirection: 'row',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              height: 40\r\n            }}\r\n          >\r\n            <Text\r\n              style={{\r\n                color: '#fff',\r\n                fontWeight: 'bold',\r\n                textAlign: 'center'\r\n              }}\r\n            >\r\n              Picture of Receipt\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n       \r\n      )}\r\n      </SafeAreaView>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container:{\r\n        paddingTop: 31, \r\n        paddingHorizontal: 21\r\n    }, \r\n    textHeader:{\r\n        fontSize: 15,\r\n        fontWeight: 'bold', \r\n        color: '#9F9F9F',\r\n        paddingHorizontal: 23,\r\n        marginBottom: 10\r\n    }\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}